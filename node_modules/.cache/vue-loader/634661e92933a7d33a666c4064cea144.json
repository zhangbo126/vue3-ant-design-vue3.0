{"remainingRequest":"C:\\Users\\Administrator\\Desktop\\crm-template\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Administrator\\Desktop\\crm-template\\src\\views\\list\\TableList.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\Administrator\\Desktop\\crm-template\\src\\views\\list\\TableList.vue","mtime":1612250320259},{"path":"C:\\Users\\Administrator\\Desktop\\crm-template\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1593498932153},{"path":"C:\\Users\\Administrator\\Desktop\\crm-template\\node_modules\\babel-loader\\lib\\index.js","mtime":1610000924500},{"path":"C:\\Users\\Administrator\\Desktop\\crm-template\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1593498932153},{"path":"C:\\Users\\Administrator\\Desktop\\crm-template\\node_modules\\vue-loader\\lib\\index.js","mtime":1610000930346}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgbW9tZW50IGZyb20gJ21vbWVudCcNCmltcG9ydCB7IFNUYWJsZSwgRWxsaXBzaXMgfSBmcm9tICdAL2NvbXBvbmVudHMnDQppbXBvcnQgeyBnZXRSb2xlTGlzdCwgZ2V0U2VydmljZUxpc3QgfSBmcm9tICdAL2FwaS9tYW5hZ2UnDQoNCmltcG9ydCBTdGVwQnlTdGVwTW9kYWwgZnJvbSAnLi9tb2R1bGVzL1N0ZXBCeVN0ZXBNb2RhbCcNCmltcG9ydCBDcmVhdGVGb3JtIGZyb20gJy4vbW9kdWxlcy9DcmVhdGVGb3JtJw0KDQpjb25zdCBjb2x1bW5zID0gWw0KICB7DQogICAgdGl0bGU6ICcjJywNCiAgICBzY29wZWRTbG90czogeyBjdXN0b21SZW5kZXI6ICdzZXJpYWwnIH0NCiAgfSwNCiAgew0KICAgIHRpdGxlOiAn6KeE5YiZ57yW5Y+3JywNCiAgICBkYXRhSW5kZXg6ICdubycNCiAgfSwNCiAgew0KICAgIHRpdGxlOiAn5o+P6L+wJywNCiAgICBkYXRhSW5kZXg6ICdkZXNjcmlwdGlvbicsDQogICAgc2NvcGVkU2xvdHM6IHsgY3VzdG9tUmVuZGVyOiAnZGVzY3JpcHRpb24nIH0NCiAgfSwNCiAgew0KICAgIHRpdGxlOiAn5pyN5Yqh6LCD55So5qyh5pWwJywNCiAgICBkYXRhSW5kZXg6ICdjYWxsTm8nLA0KICAgIHNvcnRlcjogdHJ1ZSwNCiAgICBuZWVkVG90YWw6IHRydWUsDQogICAgY3VzdG9tUmVuZGVyOiAodGV4dCkgPT4gdGV4dCArICcg5qyhJw0KICB9LA0KICB7DQogICAgdGl0bGU6ICfnirbmgIEnLA0KICAgIGRhdGFJbmRleDogJ3N0YXR1cycsDQogICAgc2NvcGVkU2xvdHM6IHsgY3VzdG9tUmVuZGVyOiAnc3RhdHVzJyB9DQogIH0sDQogIHsNCiAgICB0aXRsZTogJ+abtOaWsOaXtumXtCcsDQogICAgZGF0YUluZGV4OiAndXBkYXRlZEF0JywNCiAgICBzb3J0ZXI6IHRydWUNCiAgfSwNCiAgew0KICAgIHRpdGxlOiAn5pON5L2cJywNCiAgICBkYXRhSW5kZXg6ICdhY3Rpb24nLA0KICAgIHdpZHRoOiAnMTUwcHgnLA0KICAgIHNjb3BlZFNsb3RzOiB7IGN1c3RvbVJlbmRlcjogJ2FjdGlvbicgfQ0KICB9DQpdDQoNCmNvbnN0IHN0YXR1c01hcCA9IHsNCiAgMDogew0KICAgIHN0YXR1czogJ2RlZmF1bHQnLA0KICAgIHRleHQ6ICflhbPpl60nDQogIH0sDQogIDE6IHsNCiAgICBzdGF0dXM6ICdwcm9jZXNzaW5nJywNCiAgICB0ZXh0OiAn6L+Q6KGM5LitJw0KICB9LA0KICAyOiB7DQogICAgc3RhdHVzOiAnc3VjY2VzcycsDQogICAgdGV4dDogJ+W3suS4iue6vycNCiAgfSwNCiAgMzogew0KICAgIHN0YXR1czogJ2Vycm9yJywNCiAgICB0ZXh0OiAn5byC5bi4Jw0KICB9DQp9DQoNCmV4cG9ydCBkZWZhdWx0IHsNCiAgbmFtZTogJ1RhYmxlTGlzdCcsDQogIGNvbXBvbmVudHM6IHsNCiAgICBTVGFibGUsDQogICAgRWxsaXBzaXMsDQogICAgQ3JlYXRlRm9ybSwNCiAgICBTdGVwQnlTdGVwTW9kYWwNCiAgfSwNCiAgZGF0YSAoKSB7DQogICAgdGhpcy5jb2x1bW5zID0gY29sdW1ucw0KICAgIHJldHVybiB7DQogICAgICAvLyBjcmVhdGUgbW9kZWwNCiAgICAgIHZpc2libGU6IGZhbHNlLA0KICAgICAgY29uZmlybUxvYWRpbmc6IGZhbHNlLA0KICAgICAgbWRsOiBudWxsLA0KICAgICAgLy8g6auY57qn5pCc57SiIOWxleW8gC/lhbPpl60NCiAgICAgIGFkdmFuY2VkOiBmYWxzZSwNCiAgICAgIC8vIOafpeivouWPguaVsA0KICAgICAgcXVlcnlQYXJhbToge30sDQogICAgICAvLyDliqDovb3mlbDmja7mlrnms5Ug5b+F6aG75Li6IFByb21pc2Ug5a+56LGhDQogICAgICBsb2FkRGF0YTogcGFyYW1ldGVyID0+IHsNCiAgICAgICAgY29uc3QgcmVxdWVzdFBhcmFtZXRlcnMgPSBPYmplY3QuYXNzaWduKHt9LCBwYXJhbWV0ZXIsIHRoaXMucXVlcnlQYXJhbSkNCiAgICAgICAgY29uc29sZS5sb2coJ2xvYWREYXRhIHJlcXVlc3QgcGFyYW1ldGVyczonLCByZXF1ZXN0UGFyYW1ldGVycykNCiAgICAgICAgcmV0dXJuIGdldFNlcnZpY2VMaXN0KHJlcXVlc3RQYXJhbWV0ZXJzKQ0KICAgICAgICAgIC50aGVuKHJlcyA9PiB7DQogICAgICAgICAgICByZXR1cm4gcmVzLnJlc3VsdA0KICAgICAgICAgIH0pDQogICAgICB9LA0KICAgICAgc2VsZWN0ZWRSb3dLZXlzOiBbXSwNCiAgICAgIHNlbGVjdGVkUm93czogW10NCiAgICB9DQogIH0sDQogIGZpbHRlcnM6IHsNCiAgICBzdGF0dXNGaWx0ZXIgKHR5cGUpIHsNCiAgICAgIHJldHVybiBzdGF0dXNNYXBbdHlwZV0udGV4dA0KICAgIH0sDQogICAgc3RhdHVzVHlwZUZpbHRlciAodHlwZSkgew0KICAgICAgcmV0dXJuIHN0YXR1c01hcFt0eXBlXS5zdGF0dXMNCiAgICB9DQogIH0sDQogIGNyZWF0ZWQgKCkgew0KICAgIGdldFJvbGVMaXN0KHsgdDogbmV3IERhdGUoKSB9KQ0KICB9LA0KICBjb21wdXRlZDogew0KICAgIHJvd1NlbGVjdGlvbiAoKSB7DQogICAgICByZXR1cm4gew0KICAgICAgICBzZWxlY3RlZFJvd0tleXM6IHRoaXMuc2VsZWN0ZWRSb3dLZXlzLA0KICAgICAgICBvbkNoYW5nZTogdGhpcy5vblNlbGVjdENoYW5nZQ0KICAgICAgfQ0KICAgIH0NCiAgfSwNCiAgbWV0aG9kczogew0KICAgIGhhbmRsZUFkZCAoKSB7DQogICAgICB0aGlzLm1kbCA9IG51bGwNCiAgICAgIHRoaXMudmlzaWJsZSA9IHRydWUNCiAgICB9LA0KICAgIGhhbmRsZUVkaXQgKHJlY29yZCkgew0KICAgICAgdGhpcy52aXNpYmxlID0gdHJ1ZQ0KICAgICAgdGhpcy5tZGwgPSB7IC4uLnJlY29yZCB9DQogICAgfSwNCiAgICBoYW5kbGVPayAoKSB7DQogICAgICBjb25zdCBmb3JtID0gdGhpcy4kcmVmcy5jcmVhdGVNb2RhbC5mb3JtDQogICAgICB0aGlzLmNvbmZpcm1Mb2FkaW5nID0gdHJ1ZQ0KICAgICAgZm9ybS52YWxpZGF0ZUZpZWxkcygoZXJyb3JzLCB2YWx1ZXMpID0+IHsNCiAgICAgICAgaWYgKCFlcnJvcnMpIHsNCiAgICAgICAgICBjb25zb2xlLmxvZygndmFsdWVzJywgdmFsdWVzKQ0KICAgICAgICAgIGlmICh2YWx1ZXMuaWQgPiAwKSB7DQogICAgICAgICAgICAvLyDkv67mlLkgZS5nLg0KICAgICAgICAgICAgbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4gew0KICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHsNCiAgICAgICAgICAgICAgICByZXNvbHZlKCkNCiAgICAgICAgICAgICAgfSwgMTAwMCkNCiAgICAgICAgICAgIH0pLnRoZW4ocmVzID0+IHsNCiAgICAgICAgICAgICAgdGhpcy52aXNpYmxlID0gZmFsc2UNCiAgICAgICAgICAgICAgdGhpcy5jb25maXJtTG9hZGluZyA9IGZhbHNlDQogICAgICAgICAgICAgIC8vIOmHjee9ruihqOWNleaVsOaNrg0KICAgICAgICAgICAgICBmb3JtLnJlc2V0RmllbGRzKCkNCiAgICAgICAgICAgICAgLy8g5Yi35paw6KGo5qC8DQogICAgICAgICAgICAgIHRoaXMuJHJlZnMudGFibGUucmVmcmVzaCgpDQoNCiAgICAgICAgICAgICAgdGhpcy4kbWVzc2FnZS5pbmZvKCfkv67mlLnmiJDlip8nKQ0KICAgICAgICAgICAgfSkNCiAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgLy8g5paw5aKeDQogICAgICAgICAgICBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7DQogICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4gew0KICAgICAgICAgICAgICAgIHJlc29sdmUoKQ0KICAgICAgICAgICAgICB9LCAxMDAwKQ0KICAgICAgICAgICAgfSkudGhlbihyZXMgPT4gew0KICAgICAgICAgICAgICB0aGlzLnZpc2libGUgPSBmYWxzZQ0KICAgICAgICAgICAgICB0aGlzLmNvbmZpcm1Mb2FkaW5nID0gZmFsc2UNCiAgICAgICAgICAgICAgLy8g6YeN572u6KGo5Y2V5pWw5o2uDQogICAgICAgICAgICAgIGZvcm0ucmVzZXRGaWVsZHMoKQ0KICAgICAgICAgICAgICAvLyDliLfmlrDooajmoLwNCiAgICAgICAgICAgICAgdGhpcy4kcmVmcy50YWJsZS5yZWZyZXNoKCkNCg0KICAgICAgICAgICAgICB0aGlzLiRtZXNzYWdlLmluZm8oJ+aWsOWinuaIkOWKnycpDQogICAgICAgICAgICB9KQ0KICAgICAgICAgIH0NCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICB0aGlzLmNvbmZpcm1Mb2FkaW5nID0gZmFsc2UNCiAgICAgICAgfQ0KICAgICAgfSkNCiAgICB9LA0KICAgIGhhbmRsZUNhbmNlbCAoKSB7DQogICAgICB0aGlzLnZpc2libGUgPSBmYWxzZQ0KDQogICAgICBjb25zdCBmb3JtID0gdGhpcy4kcmVmcy5jcmVhdGVNb2RhbC5mb3JtDQogICAgICBmb3JtLnJlc2V0RmllbGRzKCkgLy8g5riF55CG6KGo5Y2V5pWw5o2u77yI5Y+v5LiN5YGa77yJDQogICAgfSwNCiAgICBoYW5kbGVTdWIgKHJlY29yZCkgew0KICAgICAgaWYgKHJlY29yZC5zdGF0dXMgIT09IDApIHsNCiAgICAgICAgdGhpcy4kbWVzc2FnZS5pbmZvKGAke3JlY29yZC5ub30g6K6i6ZiF5oiQ5YqfYCkNCiAgICAgIH0gZWxzZSB7DQogICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoYCR7cmVjb3JkLm5vfSDorqLpmIXlpLHotKXvvIzop4TliJnlt7LlhbPpl61gKQ0KICAgICAgfQ0KICAgIH0sDQogICAgb25TZWxlY3RDaGFuZ2UgKHNlbGVjdGVkUm93S2V5cywgc2VsZWN0ZWRSb3dzKSB7DQogICAgICB0aGlzLnNlbGVjdGVkUm93S2V5cyA9IHNlbGVjdGVkUm93S2V5cw0KICAgICAgdGhpcy5zZWxlY3RlZFJvd3MgPSBzZWxlY3RlZFJvd3MNCiAgICB9LA0KICAgIHRvZ2dsZUFkdmFuY2VkICgpIHsNCiAgICAgIHRoaXMuYWR2YW5jZWQgPSAhdGhpcy5hZHZhbmNlZA0KICAgIH0sDQogICAgcmVzZXRTZWFyY2hGb3JtICgpIHsNCiAgICAgIHRoaXMucXVlcnlQYXJhbSA9IHsNCiAgICAgICAgZGF0ZTogbW9tZW50KG5ldyBEYXRlKCkpDQogICAgICB9DQogICAgfQ0KICB9DQp9DQo="},{"version":3,"sources":["TableList.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyHA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"TableList.vue","sourceRoot":"src/views/list","sourcesContent":["<template>\r\n  <page-header-wrapper>\r\n    <a-card :bordered=\"false\">\r\n      <div class=\"table-page-search-wrapper\">\r\n        <a-form layout=\"inline\">\r\n          <a-row :gutter=\"48\">\r\n            <a-col :md=\"8\" :sm=\"24\">\r\n              <a-form-item label=\"规则编号\">\r\n                <a-input v-model=\"queryParam.id\" placeholder=\"\"/>\r\n              </a-form-item>\r\n            </a-col>\r\n            <a-col :md=\"8\" :sm=\"24\">\r\n              <a-form-item label=\"使用状态\">\r\n                <a-select v-model=\"queryParam.status\" placeholder=\"请选择\" default-value=\"0\">\r\n                  <a-select-option value=\"0\">全部</a-select-option>\r\n                  <a-select-option value=\"1\">关闭</a-select-option>\r\n                  <a-select-option value=\"2\">运行中</a-select-option>\r\n                </a-select>\r\n              </a-form-item>\r\n            </a-col>\r\n            <template v-if=\"advanced\">\r\n              <a-col :md=\"8\" :sm=\"24\">\r\n                <a-form-item label=\"调用次数\">\r\n                  <a-input-number v-model=\"queryParam.callNo\" style=\"width: 100%\"/>\r\n                </a-form-item>\r\n              </a-col>\r\n              <a-col :md=\"8\" :sm=\"24\">\r\n                <a-form-item label=\"更新日期\">\r\n                  <a-date-picker v-model=\"queryParam.date\" style=\"width: 100%\" placeholder=\"请输入更新日期\"/>\r\n                </a-form-item>\r\n              </a-col>\r\n              <a-col :md=\"8\" :sm=\"24\">\r\n                <a-form-item label=\"使用状态\">\r\n                  <a-select v-model=\"queryParam.useStatus\" placeholder=\"请选择\" default-value=\"0\">\r\n                    <a-select-option value=\"0\">全部</a-select-option>\r\n                    <a-select-option value=\"1\">关闭</a-select-option>\r\n                    <a-select-option value=\"2\">运行中</a-select-option>\r\n                  </a-select>\r\n                </a-form-item>\r\n              </a-col>\r\n              <a-col :md=\"8\" :sm=\"24\">\r\n                <a-form-item label=\"使用状态\">\r\n                  <a-select placeholder=\"请选择\" default-value=\"0\">\r\n                    <a-select-option value=\"0\">全部</a-select-option>\r\n                    <a-select-option value=\"1\">关闭</a-select-option>\r\n                    <a-select-option value=\"2\">运行中</a-select-option>\r\n                  </a-select>\r\n                </a-form-item>\r\n              </a-col>\r\n            </template>\r\n            <a-col :md=\"!advanced && 8 || 24\" :sm=\"24\">\r\n              <span class=\"table-page-search-submitButtons\" :style=\"advanced && { float: 'right', overflow: 'hidden' } || {} \">\r\n                <a-button type=\"primary\" @click=\"$refs.table.refresh(true)\">查询</a-button>\r\n                <a-button style=\"margin-left: 8px\" @click=\"() => this.queryParam = {}\">重置</a-button>\r\n                <a @click=\"toggleAdvanced\" style=\"margin-left: 8px\">\r\n                  {{ advanced ? '收起' : '展开' }}\r\n                  <a-icon :type=\"advanced ? 'up' : 'down'\"/>\r\n                </a>\r\n              </span>\r\n            </a-col>\r\n          </a-row>\r\n        </a-form>\r\n      </div>\r\n\r\n      <div class=\"table-operator\">\r\n        <a-button type=\"primary\" icon=\"plus\" @click=\"handleAdd\">新建</a-button>\r\n        <a-dropdown v-action:edit v-if=\"selectedRowKeys.length > 0\">\r\n          <a-menu slot=\"overlay\">\r\n            <a-menu-item key=\"1\"><a-icon type=\"delete\" />删除</a-menu-item>\r\n            <!-- lock | unlock -->\r\n            <a-menu-item key=\"2\"><a-icon type=\"lock\" />锁定</a-menu-item>\r\n          </a-menu>\r\n          <a-button style=\"margin-left: 8px\">\r\n            批量操作 <a-icon type=\"down\" />\r\n          </a-button>\r\n        </a-dropdown>\r\n      </div>\r\n\r\n      <s-table\r\n        ref=\"table\"\r\n        size=\"default\"\r\n        rowKey=\"key\"\r\n        :columns=\"columns\"\r\n        :data=\"loadData\"\r\n        :alert=\"true\"\r\n        :rowSelection=\"rowSelection\"\r\n        showPagination=\"auto\"\r\n      >\r\n        <span slot=\"serial\" slot-scope=\"text, record, index\">\r\n          {{ index + 1 }}\r\n        </span>\r\n        <span slot=\"status\" slot-scope=\"text\">\r\n          <a-badge :status=\"text | statusTypeFilter\" :text=\"text | statusFilter\" />\r\n        </span>\r\n        <span slot=\"description\" slot-scope=\"text\">\r\n          <ellipsis :length=\"4\" tooltip>{{ text }}</ellipsis>\r\n        </span>\r\n\r\n        <span slot=\"action\" slot-scope=\"text, record\">\r\n          <template>\r\n            <a @click=\"handleEdit(record)\">配置</a>\r\n            <a-divider type=\"vertical\" />\r\n            <a @click=\"handleSub(record)\">订阅报警</a>\r\n          </template>\r\n        </span>\r\n      </s-table>\r\n\r\n      <create-form\r\n        ref=\"createModal\"\r\n        :visible=\"visible\"\r\n        :loading=\"confirmLoading\"\r\n        :model=\"mdl\"\r\n        @cancel=\"handleCancel\"\r\n        @ok=\"handleOk\"\r\n      />\r\n      <step-by-step-modal ref=\"modal\" @ok=\"handleOk\"/>\r\n    </a-card>\r\n  </page-header-wrapper>\r\n</template>\r\n\r\n<script>\r\nimport moment from 'moment'\r\nimport { STable, Ellipsis } from '@/components'\r\nimport { getRoleList, getServiceList } from '@/api/manage'\r\n\r\nimport StepByStepModal from './modules/StepByStepModal'\r\nimport CreateForm from './modules/CreateForm'\r\n\r\nconst columns = [\r\n  {\r\n    title: '#',\r\n    scopedSlots: { customRender: 'serial' }\r\n  },\r\n  {\r\n    title: '规则编号',\r\n    dataIndex: 'no'\r\n  },\r\n  {\r\n    title: '描述',\r\n    dataIndex: 'description',\r\n    scopedSlots: { customRender: 'description' }\r\n  },\r\n  {\r\n    title: '服务调用次数',\r\n    dataIndex: 'callNo',\r\n    sorter: true,\r\n    needTotal: true,\r\n    customRender: (text) => text + ' 次'\r\n  },\r\n  {\r\n    title: '状态',\r\n    dataIndex: 'status',\r\n    scopedSlots: { customRender: 'status' }\r\n  },\r\n  {\r\n    title: '更新时间',\r\n    dataIndex: 'updatedAt',\r\n    sorter: true\r\n  },\r\n  {\r\n    title: '操作',\r\n    dataIndex: 'action',\r\n    width: '150px',\r\n    scopedSlots: { customRender: 'action' }\r\n  }\r\n]\r\n\r\nconst statusMap = {\r\n  0: {\r\n    status: 'default',\r\n    text: '关闭'\r\n  },\r\n  1: {\r\n    status: 'processing',\r\n    text: '运行中'\r\n  },\r\n  2: {\r\n    status: 'success',\r\n    text: '已上线'\r\n  },\r\n  3: {\r\n    status: 'error',\r\n    text: '异常'\r\n  }\r\n}\r\n\r\nexport default {\r\n  name: 'TableList',\r\n  components: {\r\n    STable,\r\n    Ellipsis,\r\n    CreateForm,\r\n    StepByStepModal\r\n  },\r\n  data () {\r\n    this.columns = columns\r\n    return {\r\n      // create model\r\n      visible: false,\r\n      confirmLoading: false,\r\n      mdl: null,\r\n      // 高级搜索 展开/关闭\r\n      advanced: false,\r\n      // 查询参数\r\n      queryParam: {},\r\n      // 加载数据方法 必须为 Promise 对象\r\n      loadData: parameter => {\r\n        const requestParameters = Object.assign({}, parameter, this.queryParam)\r\n        console.log('loadData request parameters:', requestParameters)\r\n        return getServiceList(requestParameters)\r\n          .then(res => {\r\n            return res.result\r\n          })\r\n      },\r\n      selectedRowKeys: [],\r\n      selectedRows: []\r\n    }\r\n  },\r\n  filters: {\r\n    statusFilter (type) {\r\n      return statusMap[type].text\r\n    },\r\n    statusTypeFilter (type) {\r\n      return statusMap[type].status\r\n    }\r\n  },\r\n  created () {\r\n    getRoleList({ t: new Date() })\r\n  },\r\n  computed: {\r\n    rowSelection () {\r\n      return {\r\n        selectedRowKeys: this.selectedRowKeys,\r\n        onChange: this.onSelectChange\r\n      }\r\n    }\r\n  },\r\n  methods: {\r\n    handleAdd () {\r\n      this.mdl = null\r\n      this.visible = true\r\n    },\r\n    handleEdit (record) {\r\n      this.visible = true\r\n      this.mdl = { ...record }\r\n    },\r\n    handleOk () {\r\n      const form = this.$refs.createModal.form\r\n      this.confirmLoading = true\r\n      form.validateFields((errors, values) => {\r\n        if (!errors) {\r\n          console.log('values', values)\r\n          if (values.id > 0) {\r\n            // 修改 e.g.\r\n            new Promise((resolve, reject) => {\r\n              setTimeout(() => {\r\n                resolve()\r\n              }, 1000)\r\n            }).then(res => {\r\n              this.visible = false\r\n              this.confirmLoading = false\r\n              // 重置表单数据\r\n              form.resetFields()\r\n              // 刷新表格\r\n              this.$refs.table.refresh()\r\n\r\n              this.$message.info('修改成功')\r\n            })\r\n          } else {\r\n            // 新增\r\n            new Promise((resolve, reject) => {\r\n              setTimeout(() => {\r\n                resolve()\r\n              }, 1000)\r\n            }).then(res => {\r\n              this.visible = false\r\n              this.confirmLoading = false\r\n              // 重置表单数据\r\n              form.resetFields()\r\n              // 刷新表格\r\n              this.$refs.table.refresh()\r\n\r\n              this.$message.info('新增成功')\r\n            })\r\n          }\r\n        } else {\r\n          this.confirmLoading = false\r\n        }\r\n      })\r\n    },\r\n    handleCancel () {\r\n      this.visible = false\r\n\r\n      const form = this.$refs.createModal.form\r\n      form.resetFields() // 清理表单数据（可不做）\r\n    },\r\n    handleSub (record) {\r\n      if (record.status !== 0) {\r\n        this.$message.info(`${record.no} 订阅成功`)\r\n      } else {\r\n        this.$message.error(`${record.no} 订阅失败，规则已关闭`)\r\n      }\r\n    },\r\n    onSelectChange (selectedRowKeys, selectedRows) {\r\n      this.selectedRowKeys = selectedRowKeys\r\n      this.selectedRows = selectedRows\r\n    },\r\n    toggleAdvanced () {\r\n      this.advanced = !this.advanced\r\n    },\r\n    resetSearchForm () {\r\n      this.queryParam = {\r\n        date: moment(new Date())\r\n      }\r\n    }\r\n  }\r\n}\r\n</script>\r\n"]}]}